<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#667eea">
  <title>SKSU SBO ISULAN Admin Panel - FAQ Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#667eea',
            secondary: '#764ba2',
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap');
    
    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-attachment: fixed;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
    }
    
    /* Animated Background Gradient */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(99, 102, 241, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(168, 85, 247, 0.3) 0%, transparent 50%);
      animation: gradientShift 15s ease infinite;
      pointer-events: none;
      z-index: 0;
    }
    
    @keyframes gradientShift {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.1); }
    }
    
    /* Enhanced Glassmorphism Container */
    .glass-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    /* Premium Card with Advanced Styling */
    .premium-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 249, 255, 0.98) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(139, 92, 246, 0.15);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .premium-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.08), transparent);
      transition: left 0.6s;
    }
    
    .premium-card:hover::before {
      left: 100%;
    }
    
    .premium-card:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: 0 20px 40px rgba(139, 92, 246, 0.2);
      border-color: rgba(139, 92, 246, 0.3);
    }
    
    /* Smooth Page Load Animation */
    @keyframes pageLoadFade {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-page-load {
      animation: pageLoadFade 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Stagger Animation for Lists */
    .stagger-item {
      opacity: 0;
      animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .stagger-item:nth-child(1) { animation-delay: 0.05s; }
    .stagger-item:nth-child(2) { animation-delay: 0.1s; }
    .stagger-item:nth-child(3) { animation-delay: 0.15s; }
    .stagger-item:nth-child(4) { animation-delay: 0.2s; }
    .stagger-item:nth-child(5) { animation-delay: 0.25s; }
    .stagger-item:nth-child(n+6) { animation-delay: 0.3s; }
    
    /* Premium Button Styles */
    .btn-premium {
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    .btn-premium::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .btn-premium:hover::before {
      width: 300px;
      height: 300px;
    }
    
    .btn-premium:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }
    
    .btn-premium:active {
      transform: translateY(0) scale(0.98);
    }
    
    /* Tab Button Enhancements */
    .tab-btn {
      position: relative;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
    }
    
    .tab-btn::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transform: translateX(-50%);
      transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 2px 2px 0 0;
    }
    
    .tab-btn:hover::after {
      width: 100%;
    }
    
    .tab-btn.active::after {
      width: 100%;
    }
    
    .tab-btn:hover {
      background: rgba(102, 126, 234, 0.05);
    }
    
    /* Minimal custom styles */
    div.tab-content {
      display: none !important;
    }
    div.tab-content.active {
      display: block !important;
    }
    .tab-btn.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }
    
    /* Modal Styles - Modern & Lavish */
    .modal {
      display: none;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .modal.active {
      display: flex !important;
      opacity: 1 !important;
      visibility: visible !important;
      animation: modalFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .modal.active > div {
      animation: modalSlideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    @keyframes modalFadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    @keyframes modalSlideUp {
      from {
        transform: translateY(30px) scale(0.95);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    /* Modal styles with highest priority */
    #faq-modal {
      display: none !important;
      opacity: 1 !important;
      visibility: hidden !important;
      pointer-events: none !important;
    }
    #faq-modal.active {
      display: flex !important;
      opacity: 1 !important;
      visibility: visible !important;
      pointer-events: auto !important;
    }
    #faq-modal * {
      visibility: visible !important;
      opacity: 1 !important;
    }
    #faq-modal .bg-white {
      display: block !important;
    }
    
    /* Premium Input Styling */
    .premium-input {
      transition: all 0.3s ease;
      background: linear-gradient(to bottom, #ffffff, #f9fafb);
    }
    
    .premium-input:focus {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(139, 92, 246, 0.15);
      border-color: #8b5cf6;
      background: #ffffff;
    }
    
    .premium-textarea {
      transition: all 0.3s ease;
      background: linear-gradient(to bottom, #ffffff, #f9fafb);
    }
    
    .premium-textarea:focus {
      box-shadow: 0 8px 20px rgba(139, 92, 246, 0.15);
      border-color: #8b5cf6;
      background: #ffffff;
    }
    
    /* AI Button Glow Effect */
    .ai-button {
      position: relative;
      overflow: hidden;
    }
    
    .ai-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    
    .ai-button:hover::before {
      left: 100%;
    }
    
    .ai-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(168, 85, 247, 0.4);
    }
    
    /* Save Button Shine Effect */
    .save-button {
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
      transition: all 0.3s ease;
    }
    
    .save-button::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.6s;
    }
    
    .save-button:hover::before {
      left: 100%;
    }
    
    .save-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(139, 92, 246, 0.5);
    }
    
    .save-button:active {
      transform: translateY(0) scale(0.98);
    }
    
    .tag {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      border: 1px solid rgba(102, 126, 234, 0.3);
      color: #667eea;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      margin: 0.125rem;
      transition: all 0.3s ease;
      cursor: default;
    }
    
    .tag:hover {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
      border-color: rgba(102, 126, 234, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }
    
    /* Action Button Glow */
    .action-btn {
      position: relative;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .action-btn:active {
      transform: translateY(0) scale(0.95);
    }
    
    /* Table Row Hover */
    
    tbody tr {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    
    tbody tr::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 0;
      background: linear-gradient(180deg, #667eea, #764ba2);
      transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 0 4px 4px 0;
    }    tbody tr::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    tbody tr:hover {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.05) 0%, transparent 100%);
      transform: translateX(4px);
    }
    
    tbody tr:hover::before {
      opacity: 1;
    }
    
    /* Search Input Glow */
    input[type="search"], input[type="text"]:not(.premium-input) {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(to bottom, #ffffff, #f9fafb);
    }
    
    input[type="search"]:focus, input[type="text"]:not(.premium-input):focus {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
      border-color: #667eea;
      background: #ffffff;
    }
    
    /* Stat Card Pulse */
    .stat-card {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 249, 255, 0.98) 100%);
      backdrop-filter: blur(10px);
    }
    
    .stat-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
    }
    
    /* Floating Label Effect */
    .floating-label {
      position: relative;
    }
    
    .floating-label input:focus ~ label,
    .floating-label input:not(:placeholder-shown) ~ label {
      transform: translateY(-1.5rem) scale(0.85);
      color: #667eea;
    }
    
    .floating-label label {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: none;
      background: white;
      padding: 0 0.25rem;
    }
    .empty-state {
      text-align: center;
      padding: 3rem 1rem !important;
      color: #999;
    }
    .empty-state-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }
    /* Toast notifications */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      z-index: 2000;
      animation: slideInRight 0.3s ease;
      border-left: 4px solid #4caf50;
    }
    .toast.error {
      border-left-color: #f44336;
    }
    .toast.hiding {
      animation: slideOutRight 0.3s ease;
    }
    /* Animations */
    @keyframes slideInRight {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOutRight {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(400px); opacity: 0; }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeOut {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.95); }
    }
    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    /* Skeleton loader */
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 1000px 100%;
      animation: shimmer 2s infinite;
      border-radius: 4px;
    }
    .skeleton-text {
      height: 16px;
      margin-bottom: 8px;
    }
    .skeleton-title {
      height: 24px;
      width: 60%;
      margin-bottom: 12px;
    }
    /* Smooth transitions */
    .fade-enter {
      animation: fadeIn 0.3s ease-out;
    }
    .button-loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }
    .button-loading::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      top: 50%;
      left: 50%;
      margin-left: -8px;
      margin-top: -8px;
      border: 2px solid #ffffff;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    /* Optimized transitions */
    * {
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    button {
      transition: all 0.2s ease;
      will-change: transform;
    }
    button:active {
      transform: scale(0.95);
    }
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
      transition: all 0.3s ease;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
      box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
    }
    
    /* Enhanced Animations */
    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
      }
      50% {
        box-shadow: 0 0 40px rgba(102, 126, 234, 0.6);
      }
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }
    
    @keyframes slide-in-left {
      from {
        transform: translateX(-100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes bounce-in {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }
      50% {
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    /* Gradient Text Utility */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* Enhanced Button Ripple Effect */
    .ripple {
      position: relative;
      overflow: hidden;
    }
    
    .ripple::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .ripple:active::after {
      width: 300px;
      height: 300px;
    }
    
    /* Card Lift Animation */
    @keyframes card-lift {
      from {
        transform: translateY(0);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      to {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
      }
    }
    
    /* Success Checkmark Animation */
    @keyframes checkmark {
      0% {
        stroke-dashoffset: 100;
      }
      100% {
        stroke-dashoffset: 0;
      }
    }
    
    /* Badge Pulse */
    .badge-pulse {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    /* Smooth Enter/Exit */
    .smooth-enter {
      animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    /* Hover Glow Effect */
    .hover-glow {
      transition: all 0.3s ease;
    }
    
    .hover-glow:hover {
      box-shadow: 0 0 30px rgba(102, 126, 234, 0.4);
    }
    
    /* ==================== RESPONSIVE DESIGN ==================== */
    
    /* Mobile First - Base styles */
    
    /* Extra Small Devices (phones, less than 375px) */
    @media (max-width: 374px) {
      body {
        font-size: 13px;
      }
      
      .glass-container {
        padding: 12px !important;
      }
      
      .premium-card {
        padding: 14px !important;
      }
      
      h1 {
        font-size: 1.25rem !important;
      }
      
      h2 {
        font-size: 1.125rem !important;
      }
      
      table {
        font-size: 0.75rem !important;
      }
      
      button {
        font-size: 0.8125rem !important;
        padding: 8px 12px !important;
      }
    }
    
    /* Small Devices (phones, 375px to 640px) */
    @media (max-width: 640px) {
      /* Hide desktop-only columns in tables */
      .hidden\:lg\:table-cell,
      .lg\:table-cell {
        display: none !important;
      }
      
      /* Stack elements vertically */
      .sm\:flex-row {
        flex-direction: column !important;
      }
      
      /* Full width buttons on mobile */
      .sm\:self-auto {
        width: 100% !important;
      }
      
      /* Reduce padding on containers */
      .max-w-7xl {
        padding-left: 12px !important;
        padding-right: 12px !important;
      }
      
      /* Stats cards - stack vertically */
      .grid-cols-1 {
        gap: 12px !important;
      }
      
      .stat-card {
        padding: 16px !important;
      }
      
      .stat-card .text-3xl,
      .stat-card .text-4xl,
      .stat-card .text-5xl {
        font-size: 2rem !important;
      }
      
      /* Tab navigation - horizontal scroll */
      nav.flex {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
      }
      
      nav.flex::-webkit-scrollbar {
        display: none;
      }
      
      .tab-btn {
        white-space: nowrap;
        min-width: fit-content;
      }
      
      /* Tables - horizontal scroll */
      .overflow-x-auto {
        -webkit-overflow-scrolling: touch;
      }
      
      table {
        min-width: 600px;
        font-size: 0.875rem;
      }
      
      th, td {
        padding: 12px 8px !important;
      }
      
      /* Modal adjustments */
      .modal > div {
        max-width: 95% !important;
        max-height: 90vh !important;
        overflow-y: auto;
        padding: 20px !important;
      }
      
      .modal h2, .modal h3 {
        font-size: 1.5rem !important;
      }
      
      .modal input,
      .modal textarea,
      .modal select {
        font-size: 16px !important; /* Prevents zoom on iOS */
      }
      
      /* Form fields */
      .premium-input,
      .premium-textarea {
        padding: 12px 14px !important;
        font-size: 16px !important;
      }
      
      /* Buttons - increase tap target */
      button,
      .btn-premium,
      .save-button,
      .action-btn {
        min-height: 44px;
        min-width: 44px;
        padding: 12px 16px !important;
      }
      
      /* Hide scrollbar on mobile for cleaner look */
      * {
        scrollbar-width: thin;
      }
      
      *::-webkit-scrollbar {
        width: 4px;
        height: 4px;
      }
    }
    
    /* Medium Devices (tablets, 641px to 768px) */
    @media (min-width: 641px) and (max-width: 768px) {
      .max-w-7xl {
        padding-left: 20px;
        padding-right: 20px;
      }
      
      table {
        font-size: 0.9375rem;
      }
      
      .modal > div {
        max-width: 85%;
      }
    }
    
    /* Large Devices (desktops, 769px to 1024px) */
    @media (min-width: 769px) and (max-width: 1024px) {
      .max-w-7xl {
        padding-left: 24px;
        padding-right: 24px;
      }
      
      .modal > div {
        max-width: 75%;
      }
    }
    
    /* Extra Large Devices (large desktops, 1025px and up) */
    @media (min-width: 1025px) {
      .max-w-7xl {
        max-width: 1280px;
      }
      
      .modal > div {
        max-width: 900px;
      }
    }
    
    /* Landscape orientation on phones */
    @media (max-height: 500px) and (orientation: landscape) {
      .glass-container {
        padding: 12px 16px !important;
      }
      
      h1 {
        font-size: 1.25rem !important;
      }
      
      .stat-card {
        padding: 14px !important;
      }
      
      .modal > div {
        max-height: 85vh !important;
      }
    }
    
    /* Touch device optimizations */
    @media (hover: none) and (pointer: coarse) {
      /* Increase tap targets */
      button,
      .tab-btn,
      .action-btn,
      .premium-card {
        min-height: 44px;
        min-width: 44px;
      }
      
      /* Remove hover effects on touch devices */
      .premium-card:hover,
      .stat-card:hover,
      tbody tr:hover {
        transform: none;
      }
      
      /* Add active states instead */
      .premium-card:active,
      .stat-card:active {
        transform: scale(0.98);
        opacity: 0.95;
      }
      
      button:active,
      .tab-btn:active {
        transform: scale(0.95);
      }
      
      /* Disable complex hover animations */
      .premium-card::before,
      .btn-premium::before,
      .save-button::before,
      .ai-button::before {
        display: none;
      }
    }
    
    /* Reduced motion for accessibility */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    /* Safe area insets for notched devices */
    @supports (padding: max(0px)) {
      .glass-container {
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
      }
      
      .max-w-7xl {
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
      }
    }
    
    /* Print styles */
    @media print {
      body::before {
        display: none;
      }
      
      .glass-container {
        background: white;
        border: 1px solid #ccc;
      }
      
      button {
        display: none;
      }
      
      .modal {
        display: none !important;
      }
    }
  </style>
</head>
<body class="min-h-screen relative">
  <!-- Animated Background -->
  <div class="fixed inset-0 overflow-hidden pointer-events-none" style="z-index: -1;">
    <div class="absolute -top-40 -right-40 w-96 h-96 bg-purple-400/20 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-blue-400/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-400/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
  </div>

  <!-- Header -->
  <div class="glass-container shadow-2xl border-b border-white/20 animate-page-load">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div class="flex-1">
          <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold mb-2 md:mb-3" 
              style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ec4899 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            üõ†Ô∏è SBO Admin Panel
          </h1>
          <p class="text-sm md:text-base text-gray-600 font-medium flex items-center gap-2">
            <span class="inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            Manage FAQs, view analytics, and monitor student questions
          </p>
        </div>
        <button 
          onclick="logout()" 
          class="btn-premium ripple text-white px-8 py-3 md:py-4 rounded-xl font-bold shadow-xl hover:shadow-2xl whitespace-nowrap self-start sm:self-auto border border-white/20 backdrop-blur-sm"
        >
          <span class="relative z-10 flex items-center gap-2">
            <span>üö™</span>
            <span>Logout</span>
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="glass-container shadow-lg sticky top-0 z-40 border-b border-white/20 animate-page-load" style="animation-delay: 0.1s;">
    <div class="max-w-7xl mx-auto">
      <nav class="flex overflow-x-auto">
        <button class="tab-btn flex-shrink-0 px-4 md:px-6 py-4 md:py-5 text-sm md:text-base font-bold text-gray-600 border-b-3 border-transparent transition-all active" data-tab="analytics">
          <span class="flex items-center gap-2">
            <span class="text-xl">üìä</span>
            <span class="hidden sm:inline">Analytics</span>
          </span>
        </button>
        <button class="tab-btn flex-shrink-0 px-4 md:px-6 py-4 md:py-5 text-sm md:text-base font-bold text-gray-600 border-b-3 border-transparent transition-all" data-tab="faqs">
          <span class="flex items-center gap-2">
            <span class="text-xl">üìù</span>
            <span>Manage FAQs</span>
          </span>
        </button>
        <button class="tab-btn flex-shrink-0 px-4 md:px-6 py-4 md:py-5 text-sm md:text-base font-bold text-gray-600 border-b-3 border-transparent transition-all" data-tab="unanswered">
          <span class="flex items-center gap-2">
            <span class="text-xl">‚ùì</span>
            <span class="hidden sm:inline">Unanswered</span>
          </span>
        </button>
        <button class="tab-btn flex-shrink-0 px-4 md:px-6 py-4 md:py-5 text-sm md:text-base font-bold text-gray-600 border-b-3 border-transparent transition-all" data-tab="voice">
          <span class="flex items-center gap-2">
            <span class="text-xl">üé§</span>
            <span class="hidden sm:inline">Voice Settings</span>
          </span>
        </button>
        <button class="tab-btn flex-shrink-0 px-4 md:px-6 py-4 md:py-5 text-sm md:text-base font-bold text-gray-600 border-b-3 border-transparent transition-all" data-tab="ai-insights">
          <span class="flex items-center gap-2">
            <span class="text-xl">üß†</span>
            <span class="hidden sm:inline">AI Insights</span>
          </span>
        </button>
      </nav>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10">
    <!-- Analytics Tab -->
    <div id="analytics" class="tab-content active">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8 md:mb-10">
        <div class="stat-card premium-card rounded-2xl shadow-lg p-6 md:p-8 stagger-item">
          <div class="text-3xl md:text-4xl lg:text-5xl font-black mb-3" 
               style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" 
               id="total-queries">-</div>
          <div class="text-xs md:text-sm font-bold text-gray-500 uppercase tracking-wider">Total Queries (30 days)</div>
        </div>
        <div class="stat-card premium-card rounded-2xl shadow-lg p-6 md:p-8 stagger-item">
          <div class="text-3xl md:text-4xl lg:text-5xl font-black mb-3" 
               style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" 
               id="unique-users">-</div>
          <div class="text-xs md:text-sm font-bold text-gray-500 uppercase tracking-wider">Unique Users</div>
        </div>
        <div class="stat-card premium-card rounded-2xl shadow-lg p-6 md:p-8 stagger-item">
          <div class="text-3xl md:text-4xl lg:text-5xl font-black mb-3" 
               style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" 
               id="avg-score">-</div>
          <div class="text-xs md:text-sm font-bold text-gray-500 uppercase tracking-wider">Avg Confidence</div>
        </div>
        <div class="stat-card premium-card rounded-2xl shadow-lg p-6 md:p-8 stagger-item">
          <div class="text-3xl md:text-4xl lg:text-5xl font-black mb-3" 
               style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" 
               id="low-conf">-</div>
          <div class="text-xs md:text-sm font-bold text-gray-500 uppercase tracking-wider">Low Confidence</div>
        </div>
      </div>

      <div class="premium-card rounded-2xl shadow-lg p-6 md:p-8 lg:p-10 mb-8 md:mb-10 stagger-item" style="animation-delay: 0.3s;">
        <h2 class="text-2xl md:text-3xl font-black text-gray-800 mb-6 md:mb-8 flex items-center gap-3">
          <span class="text-3xl">üî•</span>
          <span>Top 20 Questions</span>
        </h2>
        <div class="overflow-x-auto -mx-4 md:mx-0">
          <div class="inline-block min-w-full align-middle px-4 md:px-0">
            <table id="top-questions-table" class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                <tr>
                  <th class="px-4 md:px-6 py-4 md:py-5 text-left text-xs md:text-sm font-bold text-gray-700 uppercase tracking-wider">Question</th>
                  <th class="px-4 md:px-6 py-4 md:py-5 text-left text-xs md:text-sm font-bold text-gray-700 uppercase tracking-wider whitespace-nowrap">Times Asked</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="premium-card rounded-2xl shadow-lg p-6 md:p-8 lg:p-10 stagger-item" style="animation-delay: 0.35s;">
        <h2 class="text-2xl md:text-3xl font-black text-gray-800 mb-6 md:mb-8 flex items-center gap-3">
          <span class="text-3xl">üìà</span>
          <span>FAQ Usage</span>
        </h2>
        <div class="overflow-x-auto -mx-4 md:mx-0">
          <div class="inline-block min-w-full align-middle px-4 md:px-0">
            <table id="faq-usage-table" class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                <tr>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider">Category</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider">Question</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap">Times Matched</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- FAQs Tab -->
    <div id="faqs" class="tab-content">
      <div class="bg-white rounded-xl shadow-md p-4 md:p-6 lg:p-8">
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6 md:mb-8">
          <h2 class="text-xl md:text-2xl font-bold text-gray-800">üìù All FAQs</h2>
          <button class="btn-premium ripple text-white px-4 md:px-6 py-2.5 md:py-3 rounded-lg font-semibold hover:shadow-lg transition-all active:scale-95 smooth-enter" onclick="showAddModal()">
            <span class="relative z-10 flex items-center gap-2">
              <span class="text-lg md:text-xl">+</span>
              <span>Add New FAQ</span>
            </span>
          </button>
        </div>
        
        <div class="mb-4 md:mb-6">
          <input type="text" id="faq-search" 
                 placeholder="üîç Search FAQs by category, question, or keywords..." 
                 class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-sm md:text-base focus:border-primary focus:outline-none transition-colors"
                 oninput="filterFAQs(this.value)">
        </div>
        
        <div class="overflow-x-auto -mx-4 md:mx-0">
          <div class="inline-block min-w-full align-middle px-4 md:px-0">
            <table id="faqs-table" class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider">Category</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider">Question</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider hidden lg:table-cell">Keywords</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap">Actions</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td colspan="4" class="px-6 py-12 text-center text-gray-500">
                    <div class="text-4xl mb-2">üìã</div>
                    <p class="text-sm md:text-base">Loading FAQs...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Unanswered Questions Tab -->
    <div id="unanswered" class="tab-content">
      <div class="bg-white rounded-xl shadow-md p-4 md:p-6 lg:p-8">
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6 md:mb-8">
          <h2 class="text-xl md:text-2xl font-bold text-gray-800">‚ùì Unanswered Questions</h2>
          <button class="bg-gradient-to-r from-primary to-secondary text-white px-4 md:px-6 py-2.5 md:py-3 rounded-lg font-semibold hover:shadow-lg transition-all active:scale-95" onclick="refreshUnanswered()">
            üîÑ Refresh
          </button>
        </div>
        <p class="text-sm md:text-base text-gray-600 mb-4 md:mb-6">
          Questions with low confidence scores (&lt;30%) that may need new FAQs. Click "Create FAQ" to add them to the database.
        </p>
        <div class="overflow-x-auto -mx-4 md:mx-0">
          <div class="inline-block min-w-full align-middle px-4 md:px-0">
            <table id="unanswered-table" class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider">Question</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap hidden sm:table-cell">Confidence</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap">Times Asked</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider hidden md:table-cell">Timestamp</th>
                  <th class="px-3 md:px-6 py-3 md:py-4 text-left text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap">Actions</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td colspan="5" class="px-6 py-12 text-center text-gray-500">
                    <div class="text-4xl mb-2">üîç</div>
                    <p class="text-sm md:text-base">Loading unanswered questions...</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

    <!-- Voice Settings Tab -->
    <div id="voice" class="tab-content">
      <div class="bg-white rounded-xl shadow-md p-4 md:p-6 lg:p-8">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">ÔøΩÔ∏è Voice Settings</h1>
        <p class="text-gray-600 mb-6">Configure your custom voice for text-to-speech</p>

        <!-- Voice Provider Selection -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-gray-700 mb-2">Voice Provider</label>
          <select id="voiceProvider_admin" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors">
            <option value="browser">Browser Built-in (Free)</option>
            <option value="elevenlabs">ElevenLabs Voice Cloning (Your Voice)</option>
          </select>
        </div>

        <!-- Browser Voice Settings -->
        <div id="browserSettings_admin">
          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Select Voice</label>
            <select id="browserVoice_admin" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors">
              <option value="">Loading voices...</option>
            </select>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Speech Rate: <span id="rateValue_admin" class="font-bold text-primary">1.0</span>x
            </label>
            <input 
              type="range" 
              id="speechRate_admin" 
              min="0.5" 
              max="2" 
              step="0.1" 
              value="1"
              class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
            />
            <p class="text-xs text-gray-500 mt-1">Normal: 1.0 | Slower: 0.5 - 0.9 | Faster: 1.1 - 2.0</p>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Pitch: <span id="pitchValue_admin" class="font-bold text-primary">1.0</span>
            </label>
            <input 
              type="range" 
              id="speechPitch_admin" 
              min="0" 
              max="2" 
              step="0.1" 
              value="1"
              class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
            />
            <p class="text-xs text-gray-500 mt-1">Lower (masculine): 0.5 - 0.9 | Normal: 1.0 | Higher (feminine): 1.1 - 2.0</p>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Volume: <span id="volumeValue_admin" class="font-bold text-primary">1.0</span>
            </label>
            <input 
              type="range" 
              id="speechVolume_admin" 
              min="0" 
              max="1" 
              step="0.1" 
              value="1"
              class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
            />
            <p class="text-xs text-gray-500 mt-1">Quieter: 0.1 - 0.5 | Normal: 0.6 - 1.0</p>
          </div>

          <button 
            id="testBrowserVoiceBtn_admin"
            class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-4 rounded-lg hover:shadow-lg transition-all font-bold text-lg mb-6"
          >
            üéß Test Voice
          </button>
        </div>

        <!-- ElevenLabs Settings -->
        <div id="elevenlabsSettings_admin" class="hidden">
          <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded">
            <h3 class="font-semibold text-blue-800 mb-2">üìù Setup Instructions</h3>
            <ol class="text-sm text-blue-700 space-y-1 list-decimal list-inside">
              <li>Go to <a href="https://elevenlabs.io" target="_blank" class="underline">elevenlabs.io</a> and sign up</li>
              <li>Clone your voice (1-2 min recording needed)</li>
              <li>Copy your API Key from Profile settings</li>
              <li>Copy your Voice ID from Voices section</li>
              <li>Paste them below and click Save</li>
            </ol>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              ElevenLabs API Key
              <a href="https://elevenlabs.io/app/settings" target="_blank" class="text-blue-600 text-xs ml-2">(Get it here)</a>
            </label>
            <input 
              type="password" 
              id="elevenLabsApiKey_admin" 
              placeholder="sk_..." 
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors"
            />
            <p class="text-xs text-gray-500 mt-1">Your API key is stored locally and never sent to our server</p>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Voice ID
              <a href="https://elevenlabs.io/app/voice-library" target="_blank" class="text-blue-600 text-xs ml-2">(Find in Voices)</a>
            </label>
            <input 
              type="text" 
              id="elevenLabsVoiceId_admin" 
              placeholder="voice_..." 
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:outline-none transition-colors"
            />
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Voice Stability: <span id="stabilityValue_admin" class="font-bold text-primary">0.6</span>
            </label>
            <input 
              type="range" 
              id="stability_admin" 
              min="0" 
              max="1" 
              step="0.1" 
              value="0.6"
              class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
            />
            <p class="text-xs text-gray-500">Higher = more consistent, Lower = more expressive</p>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              Voice Similarity: <span id="similarityValue_admin" class="font-bold text-primary">0.8</span>
            </label>
            <input 
              type="range" 
              id="similarity_admin" 
              min="0" 
              max="1" 
              step="0.05" 
              value="0.8"
              class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
            />
            <p class="text-xs text-gray-500">How closely it matches your original voice</p>
          </div>

          <button 
            id="testVoiceBtn_admin"
            class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-4 rounded-lg hover:shadow-lg transition-all font-bold text-lg mb-6"
          >
            üéß Test Your Voice
          </button>
          <p class="text-sm text-gray-600 mb-6">Will speak: "Welcome to SKSU SBO ISULAN FAQ system."</p>
        </div>

        <!-- Save Button -->
        <div class="flex gap-4">
          <button 
            id="saveSettings_admin"
            class="save-button ripple flex-1 text-white px-8 py-3 rounded-lg hover:shadow-lg transition-all font-semibold text-lg"
          >
            <span class="relative z-10 flex items-center justify-center gap-2">
              <span>üíæ</span>
              <span>Save Settings</span>
            </span>
          </button>
          <button 
            id="resetSettings_admin"
            class="ripple hover-glow bg-gray-300 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-400 transition-all font-semibold"
          >
            <span class="relative z-10 flex items-center justify-center gap-2">
              <span>üîÑ</span>
              <span>Reset</span>
            </span>
          </button>
        </div>

        <!-- Status Message -->
        <div id="statusMessage_admin" class="hidden mt-4 p-4 rounded-lg"></div>
      </div>
    </div>

    <!-- AI Insights Tab -->
    <div id="ai-insights" class="tab-content">
      <div id="ai-insights-container" class="min-h-[400px]">
        <!-- AI Insights Dashboard will be loaded here -->
        <div class="premium-card rounded-2xl p-12 shadow-xl text-center">
          <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-purple-500 mx-auto mb-4"></div>
          <p class="text-gray-600 font-semibold">Loading AI Insights...</p>
        </div>
      </div>
    </div>
  </div>

  <script src="/ai-insights.js"></script>

  <script>
    console.log('üöÄ Admin panel starting...');
    
    // Check authentication via API call instead of sessionStorage
    async function checkAuth() {
      try {
        const res = await fetch('/api/admin/faqs');
        if (res.status === 401) {
          alert('‚ö†Ô∏è Please login first!');
          window.location.href = '/';
          return false;
        }
        return true;
      } catch (error) {
        console.error('Auth check failed:', error);
        return true; // Allow access if check fails
      }
    }

    // Logout function
    async function logout() {
      if (confirm('Are you sure you want to logout?')) {
        try {
          await fetch('/admin/logout', { method: 'POST' });
          alert('‚úÖ Logged out successfully!');
          window.location.href = '/';
        } catch (error) {
          console.error('Logout failed:', error);
          window.location.href = '/';
        }
      }
    }

    let currentFaqs = [];
    let searchDebounceTimer = null;

    // Debounce helper for search optimization
    function debounce(func, delay) {
      return function(...args) {
        clearTimeout(searchDebounceTimer);
        searchDebounceTimer = setTimeout(() => func.apply(this, args), delay);
      };
    }

    // Toast notification system
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type === 'error' ? 'error' : ''}`;
      
      const icon = type === 'error' ? '‚ùå' : '‚úÖ';
      toast.innerHTML = `
        <span style="font-size: 1.5rem;">${icon}</span>
        <span style="font-weight: 600;">${message}</span>
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add('hiding');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Simple tab switching function
    // Optimized tab switching with smooth transitions
    function switchTab(tabName) {
      console.log('Switching to tab:', tabName);
      
      // Remove active from all buttons
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      
      // Fade out current content
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
        content.style.opacity = '0';
      });
      
      // Add active to clicked button with smooth transition
      const clickedBtn = event?.target?.closest('.tab-btn') || document.querySelector(`[data-tab="${tabName}"]`);
      if (clickedBtn) {
        clickedBtn.classList.add('active');
      }
      
      // Show selected tab with fade in animation
      const selectedTab = document.getElementById(tabName);
      if (selectedTab) {
        selectedTab.classList.add('active');
        requestAnimationFrame(() => {
          selectedTab.style.opacity = '1';
          selectedTab.style.transition = 'opacity 0.3s ease';
        });
      }
    }

    // Load analytics with loading state
    async function loadAnalytics() {
      const statsCards = document.querySelectorAll('.stat-card');
      
      try {
        console.log('üìä Loading analytics...');
        
        // Show loading skeleton
        statsCards.forEach(card => {
          const valueEl = card.querySelector('[id$="-queries"], [id$="-users"], [id$="-score"], [id$="-conf"]');
          if (valueEl) {
            valueEl.innerHTML = '<div class="skeleton" style="width: 60px; height: 32px; display: inline-block;"></div>';
          }
        });
        
        const res = await fetch('/api/admin/analytics');
        const data = await res.json();
        
        // Animate number updates
        animateValue('total-queries', 0, data.stats.total_queries || 0, 500);
        animateValue('unique-users', 0, data.stats.unique_users || 0, 500);
        
        document.getElementById('avg-score').textContent = ((data.stats.avg_score || 0) * 100).toFixed(0) + '%';
        document.getElementById('low-conf').textContent = data.stats.low_confidence_queries || 0;
      
        const topQuestionsBody = document.querySelector('#top-questions-table tbody');
        topQuestionsBody.innerHTML = data.topQuestions.map((q, i) => `
          <tr class="hover:bg-gray-50 transition-colors fade-enter" style="animation-delay: ${i * 0.05}s">
            <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm text-gray-800">${q.question}</td>
            <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm font-bold text-primary">${q.count}</td>
          </tr>
        `).join('');
        
        const faqUsageBody = document.querySelector('#faq-usage-table tbody');
        faqUsageBody.innerHTML = data.faqUsage.map((f, i) => `
          <tr class="hover:bg-gray-50 transition-colors fade-enter" style="animation-delay: ${i * 0.05}s">
            <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm"><span class="tag">${f.category || 'General'}</span></td>
            <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm text-gray-800">${f.question}</td>
            <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm font-bold text-primary">${f.times_matched}</td>
          </tr>
        `).join('');
        console.log('‚úÖ Analytics loaded');
      } catch (error) {
        console.error('‚ùå Error loading analytics:', error);
        statsCards.forEach(card => {
          const valueEl = card.querySelector('[id$="-queries"], [id$="-users"], [id$="-score"], [id$="-conf"]');
          if (valueEl) {
            valueEl.textContent = '‚Äî';
          }
        });
      }
    }

    // Animate number counting
    function animateValue(id, start, end, duration) {
      const element = document.getElementById(id);
      if (!element) return;
      
      const range = end - start;
      const increment = range / (duration / 16);
      let current = start;
      
      const timer = setInterval(() => {
        current += increment;
        if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
          current = end;
          clearInterval(timer);
        }
        element.textContent = Math.round(current);
      }, 16);
    }

    // Load FAQs with loading state
    async function loadFAQs() {
      const tbody = document.querySelector('#faqs-table tbody');
      
      try {
        console.log('üìù Loading FAQs...');
        
        // Show skeleton loader
        tbody.innerHTML = `
          ${Array(3).fill(0).map(() => `
            <tr>
              <td class="px-3 md:px-6 py-3 md:py-4"><div class="skeleton" style="width: 80px; height: 24px;"></div></td>
              <td class="px-3 md:px-6 py-3 md:py-4">
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-text"></div>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 hidden lg:table-cell"><div class="skeleton" style="width: 120px; height: 24px;"></div></td>
              <td class="px-3 md:px-6 py-3 md:py-4"><div class="skeleton" style="width: 100px; height: 32px;"></div></td>
            </tr>
          `).join('')}
        `;
        
        const res = await fetch('/api/admin/faqs');
        currentFaqs = await res.json();
        console.log('FAQs loaded:', currentFaqs.length);
        
        if (currentFaqs.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="4" class="empty-state">
                <div class="empty-state-icon">üì≠</div>
                <p style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">No FAQs Yet</p>
                <p style="font-size: 0.9rem; color: #999;">Click "Add New FAQ" to create your first FAQ</p>
              </td>
            </tr>
          `;
        } else {
          tbody.innerHTML = currentFaqs.map((faq, i) => `
            <tr class="hover:bg-gray-50 transition-colors fade-enter" style="animation-delay: ${i * 0.05}s">
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                <span class="tag">${faq.category || 'General'}</span>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                <div class="font-semibold text-gray-800 mb-1">${faq.question}</div>
                <div class="text-xs text-gray-600 leading-relaxed hidden sm:block">
                  ${faq.answer.substring(0, 100)}${faq.answer.length > 100 ? '...' : ''}
                </div>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm hidden lg:table-cell">
                ${faq.keywords.slice(0, 3).map(k => `<span class="tag">${k}</span>`).join(' ')}
                ${faq.keywords.length > 3 ? `<span class="tag">+${faq.keywords.length - 3}</span>` : ''}
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm whitespace-nowrap">
                <button class="bg-blue-500 hover:bg-blue-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mr-1 mb-1 hover:shadow-md active:scale-95" onclick="editFAQ(${faq.id})" title="Edit">
                  ‚úèÔ∏è <span class="hidden md:inline">Edit</span>
                </button>
                <button class="bg-red-500 hover:bg-red-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mb-1 hover:shadow-md active:scale-95" onclick="deleteFAQ(${faq.id})" title="Delete">
                  üóëÔ∏è <span class="hidden md:inline">Delete</span>
                </button>
              </td>
            </tr>
          `).join('');
        }
        console.log('‚úÖ FAQs loaded');
      } catch (error) {
        console.error('‚ùå Error loading FAQs:', error);
        tbody.innerHTML = `
          <tr>
            <td colspan="4" class="empty-state">
              <div class="empty-state-icon">‚ö†Ô∏è</div>
              <p style="color: #e74c3c;">Error loading FAQs</p>
              <p style="font-size: 0.9rem; color: #999;">${error.message}</p>
            </td>
          </tr>
        `;
      }
    }

    // Optimized search with debouncing and smooth transitions
    const debouncedFilter = debounce(function(searchTerm) {
      const term = searchTerm.toLowerCase().trim();
      const tbody = document.querySelector('#faqs-table tbody');
      
      if (!currentFaqs || currentFaqs.length === 0) {
        return;
      }
      
      // Add fade-out effect
      tbody.style.opacity = '0.5';
      tbody.style.transition = 'opacity 0.2s ease';
      
      setTimeout(() => {
        if (!term) {
          // Show all FAQs if search is empty
          tbody.innerHTML = currentFaqs.map((faq, i) => `
            <tr class="hover:bg-gray-50 transition-colors fade-enter" style="animation-delay: ${i * 0.03}s">
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                <span class="tag">${faq.category || 'General'}</span>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                <div class="font-semibold text-gray-800 mb-1">${faq.question}</div>
                <div class="text-xs text-gray-600 leading-relaxed hidden sm:block">
                  ${faq.answer.substring(0, 100)}${faq.answer.length > 100 ? '...' : ''}
                </div>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm hidden lg:table-cell">
                ${faq.keywords.slice(0, 3).map(k => `<span class="tag">${k}</span>`).join(' ')}
                ${faq.keywords.length > 3 ? `<span class="tag">+${faq.keywords.length - 3}</span>` : ''}
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm whitespace-nowrap">
                <button class="bg-blue-500 hover:bg-blue-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mr-1 mb-1 hover:shadow-md active:scale-95" onclick="editFAQ(${faq.id})" title="Edit">
                  ‚úèÔ∏è <span class="hidden md:inline">Edit</span>
                </button>
                <button class="bg-red-500 hover:bg-red-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mb-1 hover:shadow-md active:scale-95" onclick="deleteFAQ(${faq.id})" title="Delete">
                  üóëÔ∏è <span class="hidden md:inline">Delete</span>
                </button>
              </td>
            </tr>
          `).join('');
        } else {
          // Filter FAQs by category, question, or keywords
          const filtered = currentFaqs.filter(faq => {
            const categoryMatch = (faq.category || '').toLowerCase().includes(term);
            const questionMatch = faq.question.toLowerCase().includes(term);
            const keywordsMatch = faq.keywords.some(k => k.toLowerCase().includes(term));
            return categoryMatch || questionMatch || keywordsMatch;
          });
          
          if (filtered.length === 0) {
            tbody.innerHTML = `
              <tr>
                <td colspan="4" class="empty-state">
                  <div class="empty-state-icon">üîç</div>
                  <p class="text-base md:text-lg font-semibold mb-2">No FAQs Found</p>
                  <p class="text-sm text-gray-500">No FAQs match "${searchTerm}"</p>
                </td>
              </tr>
            `;
          } else {
            tbody.innerHTML = filtered.map((faq, i) => `
              <tr class="hover:bg-gray-50 transition-colors fade-enter" style="animation-delay: ${i * 0.03}s">
                <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                  <span class="tag">${faq.category || 'General'}</span>
                </td>
                <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                  <div class="font-semibold text-gray-800 mb-1">${faq.question}</div>
                  <div class="text-xs text-gray-600 leading-relaxed hidden sm:block">
                    ${faq.answer.substring(0, 100)}${faq.answer.length > 100 ? '...' : ''}
                  </div>
                </td>
                <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm hidden lg:table-cell">
                  ${faq.keywords.slice(0, 3).map(k => `<span class="tag">${k}</span>`).join(' ')}
                  ${faq.keywords.length > 3 ? `<span class="tag">+${faq.keywords.length - 3}</span>` : ''}
                </td>
                <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm whitespace-nowrap">
                  <button class="bg-blue-500 hover:bg-blue-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mr-1 mb-1 hover:shadow-md active:scale-95" onclick="editFAQ(${faq.id})" title="Edit">
                    ‚úèÔ∏è <span class="hidden md:inline">Edit</span>
                  </button>
                  <button class="bg-red-500 hover:bg-red-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mb-1 hover:shadow-md active:scale-95" onclick="deleteFAQ(${faq.id})" title="Delete">
                    üóëÔ∏è <span class="hidden md:inline">Delete</span>
                  </button>
                </td>
              </tr>
            `).join('');
          }
        }
        
        // Fade back in
        tbody.style.opacity = '1';
      }, 200);
    }, 300);
    
    // Wrapper function for the search input
    function filterFAQs(searchTerm) {
      debouncedFilter(searchTerm);
    }

    function showAddModal() {
      console.log('üîµ Opening Add FAQ modal...');
      const modal = document.getElementById('faq-modal');
      const form = document.getElementById('faq-form');
      
      if (!modal) {
        console.error('‚ùå Modal element not found!');
        alert('Error: Modal not found! Please refresh the page.');
        return;
      }
      
      console.log('Modal found:', modal);
      console.log('Modal current display:', window.getComputedStyle(modal).display);
      console.log('Modal current opacity:', window.getComputedStyle(modal).opacity);
      
      document.getElementById('modal-title').textContent = '‚ûï Add New FAQ';
      form.reset();
      document.getElementById('faq-id').value = '';
      
      // Force display with immediate effect - multiple approaches
      modal.classList.add('active');
      modal.style.setProperty('display', 'flex', 'important');
      modal.style.setProperty('opacity', '1', 'important');
      modal.style.setProperty('visibility', 'visible', 'important');
      modal.style.setProperty('z-index', '99999', 'important');
      
      console.log('‚úÖ Modal should be visible now');
      console.log('Modal classes:', modal.className);
      console.log('Modal display after:', window.getComputedStyle(modal).display);
      console.log('Modal opacity after:', window.getComputedStyle(modal).opacity);
      
      // Focus first input with smooth transition
      requestAnimationFrame(() => {
        const firstInput = form.querySelector('input, textarea');
        if (firstInput) {
          setTimeout(() => {
            firstInput.focus();
            console.log('Input focused');
          }, 100);
        }
      });
    }

    function editFAQ(id) {
      const faq = currentFaqs.find(f => f.id === id);
      if (!faq) return;
      
      const modal = document.getElementById('faq-modal');
      
      document.getElementById('modal-title').textContent = '‚úèÔ∏è Edit FAQ';
      document.getElementById('faq-id').value = faq.id;
      document.getElementById('category').value = faq.category;
      document.getElementById('question').value = faq.question;
      document.getElementById('answer').value = faq.answer;
      document.getElementById('keywords').value = faq.keywords.join(', ');
      
      modal.classList.add('active');
      
      // Focus question input
      requestAnimationFrame(() => {
        setTimeout(() => document.getElementById('question').focus(), 300);
      });
    }

    function closeModal() {
      console.log('üî¥ Closing modal...');
      const modal = document.getElementById('faq-modal');
      const modalContent = modal.querySelector('.bg-white');
      
      // Add fade-out animation
      if (modalContent) {
        modalContent.style.animation = 'fadeOut 0.2s ease-out';
      }
      
      setTimeout(() => {
        modal.classList.remove('active');
        modal.style.removeProperty('display');
        modal.style.removeProperty('opacity');
        modal.style.removeProperty('visibility');
        modal.style.removeProperty('z-index');
        if (modalContent) {
          modalContent.style.animation = '';
        }
        console.log('Modal closed');
      }, 200);
    }

    async function deleteFAQ(id) {
      if (!confirm('üóëÔ∏è Are you sure you want to delete this FAQ?\n\nThis action cannot be undone.')) return;
      
      // Find and disable the delete button
      const deleteBtn = event?.target?.closest('button');
      const originalHTML = deleteBtn?.innerHTML;
      
      try {
        if (deleteBtn) {
          deleteBtn.classList.add('button-loading');
          deleteBtn.disabled = true;
        }
        
        const res = await fetch(`/api/admin/faqs/${id}`, { method: 'DELETE' });
        if (!res.ok) throw new Error('Failed to delete FAQ');
        
        await loadFAQs();
        await loadAnalytics();
        showToast('FAQ deleted successfully');
        console.log('‚úÖ FAQ deleted successfully');
      } catch (error) {
        showToast('Error deleting FAQ: ' + error.message, 'error');
        console.error('Error deleting FAQ:', error);
        
        // Restore button on error
        if (deleteBtn && originalHTML) {
          deleteBtn.classList.remove('button-loading');
          deleteBtn.disabled = false;
          deleteBtn.innerHTML = originalHTML;
        }
      }
    }

    // Load unanswered questions with loading state
    async function loadUnanswered() {
      const tbody = document.querySelector('#unanswered-table tbody');
      
      try {
        console.log('‚ùì Loading unanswered questions...');
        
        // Show skeleton loader
        tbody.innerHTML = `
          ${Array(3).fill(0).map(() => `
            <tr>
              <td class="px-3 md:px-6 py-3 md:py-4"><div class="skeleton skeleton-title"></div></td>
              <td class="px-3 md:px-6 py-3 md:py-4 hidden sm:table-cell"><div class="skeleton" style="width: 60px; height: 24px;"></div></td>
              <td class="px-3 md:px-6 py-3 md:py-4"><div class="skeleton" style="width: 40px; height: 24px;"></div></td>
              <td class="px-3 md:px-6 py-3 md:py-4 hidden md:table-cell"><div class="skeleton" style="width: 120px; height: 16px;"></div></td>
              <td class="px-3 md:px-6 py-3 md:py-4"><div class="skeleton" style="width: 100px; height: 32px;"></div></td>
            </tr>
          `).join('')}
        `;
        
        const res = await fetch('/api/admin/unanswered');
        const questions = await res.json();
        console.log('Unanswered questions loaded:', questions.length);
        
        if (questions.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="5" class="empty-state">
                <div class="empty-state-icon">üéâ</div>
                <p class="text-base md:text-lg font-semibold mb-2">All Questions Answered!</p>
                <p class="text-sm text-gray-500">No low-confidence questions in the past 30 days</p>
              </td>
            </tr>
          `;
        } else {
          tbody.innerHTML = questions.map((q, i) => `
            <tr class="hover:bg-gray-50 transition-colors fade-enter" style="animation-delay: ${i * 0.05}s">
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm">
                <div class="font-semibold text-gray-800">${q.question}</div>
                <div class="text-xs text-gray-600 sm:hidden mt-1">
                  <span class="inline-block px-2 py-0.5 rounded text-xs ${q.score < 0.15 ? 'bg-red-100 text-red-800' : 'bg-orange-100 text-orange-800'}">${(q.score * 100).toFixed(0)}%</span>
                </div>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm text-center hidden sm:table-cell">
                <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold ${q.score < 0.15 ? 'bg-red-100 text-red-800' : 'bg-orange-100 text-orange-800'}">
                  ${(q.score * 100).toFixed(0)}%
                </span>
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm text-center font-bold text-primary">
                ${q.times_asked}
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs text-gray-600 hidden md:table-cell">
                ${new Date(q.timestamp).toLocaleString()}
              </td>
              <td class="px-3 md:px-6 py-3 md:py-4 text-xs md:text-sm whitespace-nowrap">
                <button class="bg-green-500 hover:bg-green-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mr-1 mb-1 hover:shadow-md active:scale-95" onclick="createFAQFromQuestion('${q.question.replace(/'/g, "\\'")}')">
                  ‚ûï <span class="hidden md:inline">Create FAQ</span>
                </button>
                <button class="bg-red-500 hover:bg-red-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-xs md:text-sm font-semibold transition-all mb-1 hover:shadow-md active:scale-95" onclick="deleteUnanswered(${q.id})">
                  üóëÔ∏è <span class="hidden md:inline">Dismiss</span>
                </button>
              </td>
            </tr>
          `).join('');
        }
        console.log('‚úÖ Unanswered questions loaded');
      } catch (error) {
        console.error('‚ùå Error loading unanswered:', error);
        const tbody = document.querySelector('#unanswered-table tbody');
        tbody.innerHTML = `
          <tr>
            <td colspan="5" class="empty-state">
              <div class="empty-state-icon">‚ö†Ô∏è</div>
              <p style="color: #e74c3c;">Error loading unanswered questions</p>
              <p style="font-size: 0.9rem; color: #999;">${error.message}</p>
            </td>
          </tr>
        `;
      }
    }

    function refreshUnanswered() {
      loadUnanswered();
    }

    function createFAQFromQuestion(question) {
      document.getElementById('modal-title').textContent = 'Create FAQ from Question';
      document.getElementById('faq-form').reset();
      document.getElementById('faq-id').value = '';
      document.getElementById('question').value = question;
      document.getElementById('faq-modal').classList.add('active');
    }

    async function deleteUnanswered(id) {
      if (!confirm('Dismiss this question? It will be removed from the unanswered list.')) return;
      
      try {
        const res = await fetch(`/api/admin/unanswered/${id}`, { method: 'DELETE' });
        if (!res.ok) throw new Error('Failed to dismiss question');
        
        await loadUnanswered();
        showToast('Question dismissed successfully');
        console.log('‚úÖ Question dismissed successfully');
      } catch (error) {
        showToast('Error dismissing question: ' + error.message, 'error');
        console.error('Error dismissing question:', error);
      }
    }

    // Make functions globally accessible for onclick attributes
    window.showAddModal = showAddModal;
    window.editFAQ = editFAQ;
    window.closeModal = closeModal;
    window.deleteFAQ = deleteFAQ;
    window.filterFAQs = filterFAQs;
    window.createFAQFromQuestion = createFAQFromQuestion;
    window.deleteUnanswered = deleteUnanswered;

    // Initialize when page loads
    window.addEventListener('load', async () => {
      console.log('ÔøΩ Initializing admin panel...');

      // Tab switching - add click handlers
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          console.log('Tab clicked:', tabName);
          
          document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          
          this.classList.add('active');
          const tabContent = document.getElementById(tabName);
          if (tabContent) {
            tabContent.classList.add('active');
            console.log('Tab content activated:', tabName);
            
            // If voice tab, ensure settings are visible
            if (tabName === 'voice') {
              console.log('Voice tab activated - checking settings visibility');
              const browserSettings = document.getElementById('browserSettings');
              const voiceProvider = document.getElementById('voiceProvider');
              console.log('browserSettings exists:', !!browserSettings);
              console.log('voiceProvider exists:', !!voiceProvider);
              if (browserSettings) {
                console.log('browserSettings classes:', browserSettings.className);
              }
            }
          } else {
            console.error('Tab content not found:', tabName);
          }
        });
      });

      // Form submit
      document.getElementById('faq-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = e.target.querySelector('button[type="submit"]');
        const originalBtnText = submitBtn?.innerHTML;
        
        const id = document.getElementById('faq-id').value;
        const data = {
          category: document.getElementById('category').value.trim(),
          question: document.getElementById('question').value.trim(),
          answer: document.getElementById('answer').value.trim(),
          keywords: document.getElementById('keywords').value.split(',').map(k => k.trim()).filter(Boolean)
        };
        
        // Validation
        if (!data.category || !data.question || !data.answer) {
          showToast('Please fill in all required fields', 'error');
          
          // Highlight empty fields
          if (!data.category) document.getElementById('category').classList.add('border-red-500');
          if (!data.question) document.getElementById('question').classList.add('border-red-500');
          if (!data.answer) document.getElementById('answer').classList.add('border-red-500');
          
          setTimeout(() => {
            document.querySelectorAll('.border-red-500').forEach(el => el.classList.remove('border-red-500'));
          }, 2000);
          return;
        }
        
        try {
          // Show loading state on submit button
          if (submitBtn) {
            submitBtn.classList.add('button-loading');
            submitBtn.disabled = true;
          }
          
          if (id) {
            const res = await fetch(`/api/admin/faqs/${id}`, {
              method: 'PUT',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data)
            });
            if (!res.ok) throw new Error('Failed to update FAQ');
            showToast('‚úÖ FAQ updated successfully');
          } else {
            const res = await fetch('/api/admin/faqs', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data)
            });
            if (!res.ok) throw new Error('Failed to create FAQ');
            showToast('‚úÖ FAQ created successfully');
          }
          
          closeModal();
          
          // Reload data with smooth transitions
          await Promise.all([
            loadFAQs(),
            loadAnalytics(),
            loadUnanswered()
          ]);
          
          console.log(`‚úÖ FAQ ${id ? 'updated' : 'created'} successfully`);
        } catch (error) {
          showToast('‚ùå Error saving FAQ: ' + error.message, 'error');
          console.error('Error saving FAQ:', error);
        } finally {
          // Restore button state
          if (submitBtn && originalBtnText) {
            submitBtn.classList.remove('button-loading');
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalBtnText;
          }
        }
      });

      // Close modal on background click
      document.getElementById('faq-modal').addEventListener('click', (e) => {
        if (e.target.id === 'faq-modal') closeModal();
      });

      // AI-powered features
      async function generateAIAnswer() {
        const question = document.getElementById('question').value.trim();
        const category = document.getElementById('category').value.trim();
        
        if (!question) {
          alert('Please enter a question first!');
          return;
        }
        
        const answerField = document.getElementById('answer');
        const originalPlaceholder = answerField.placeholder;
        answerField.placeholder = 'ü§ñ AI is generating an answer...';
        answerField.disabled = true;
        
        try {
          const res = await fetch('/api/admin/ai/generate-answer', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ question, category: category || 'General' })
          });
          
          if (!res.ok) {
            const error = await res.json();
            throw new Error(error.error || 'Failed to generate answer');
          }
          
          const data = await res.json();
          answerField.value = data.answer;
          showToast('‚ú® AI generated an answer!');
        } catch (error) {
          console.error('AI generation error:', error);
          showToast('AI generation failed: ' + error.message, 'error');
        } finally {
          answerField.placeholder = originalPlaceholder;
          answerField.disabled = false;
          answerField.focus();
        }
      }

      async function generateAIKeywords() {
        const question = document.getElementById('question').value.trim();
        const answer = document.getElementById('answer').value.trim();
        
        if (!question || !answer) {
          alert('Please enter both question and answer first!');
          return;
        }
        
        const keywordsField = document.getElementById('keywords');
        const originalPlaceholder = keywordsField.placeholder;
        keywordsField.placeholder = 'ü§ñ AI is generating keywords...';
        keywordsField.disabled = true;
        
        try {
          const res = await fetch('/api/admin/ai/generate-keywords', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ question, answer })
          });
          
          if (!res.ok) {
            const error = await res.json();
            throw new Error(error.error || 'Failed to generate keywords');
          }
          
          const data = await res.json();
          keywordsField.value = data.keywords.join(', ');
          showToast('‚ú® AI generated keywords!');
        } catch (error) {
          console.error('AI generation error:', error);
          showToast('AI generation failed: ' + error.message, 'error');
        } finally {
          keywordsField.placeholder = originalPlaceholder;
          keywordsField.disabled = false;
          keywordsField.focus();
        }
      }

      // Make AI functions globally accessible
      window.generateAIAnswer = generateAIAnswer;
      window.generateAIKeywords = generateAIKeywords;

      // Check authentication first, then load data
      const isAuthenticated = await checkAuth();
      if (!isAuthenticated) {
        return; // Stop loading if not authenticated
      }

      // Load initial data
      loadAnalytics();
      loadFAQs();
      loadUnanswered();

      // Auto-refresh analytics every 30 seconds
      setInterval(loadAnalytics, 30000);
      
      // Check AI status
      fetch('/api/admin/ai/status')
        .then(res => {
          if (res.status === 401) {
            console.log('‚ö†Ô∏è Not authenticated');
            return null;
          }
          return res.json();
        })
        .then(data => {
          if (data && data.enabled) {
            console.log(`‚úÖ AI Features enabled (${data.provider} - ${data.model})`);
          } else if (data) {
            console.log('‚ÑπÔ∏è AI Features disabled');
          }
        })
        .catch(() => console.log('‚ÑπÔ∏è Could not check AI status'));
      
      // Load voice settings
      initVoiceSettings();
      
      console.log('‚úÖ Admin panel ready!');
    });

    // ===== VOICE SETTINGS FUNCTIONS =====
    async function initVoiceSettings() {
      console.log('üé§ Initializing voice settings...');
      
      // Load saved provider
      const provider = localStorage.getItem('voiceProvider') || 'browser';
      document.getElementById('voiceProvider_admin').value = provider;
      showProviderSettings_admin(provider);
      
      // Load browser voices
      loadBrowserVoices_admin();
      
      // Load ElevenLabs settings (still from localStorage)
      const apiKey = localStorage.getItem('elevenLabsApiKey') || '';
      const voiceId = localStorage.getItem('elevenLabsVoiceId') || '';
      const stability = localStorage.getItem('elevenLabsStability') || '0.6';
      const similarity = localStorage.getItem('elevenLabsSimilarity') || '0.8';
      
      document.getElementById('elevenLabsApiKey_admin').value = apiKey;
      document.getElementById('elevenLabsVoiceId_admin').value = voiceId;
      document.getElementById('stability_admin').value = stability;
      document.getElementById('similarity_admin').value = similarity;
      document.getElementById('stabilityValue_admin').textContent = stability;
      document.getElementById('similarityValue_admin').textContent = similarity;
      
      // Load browser settings from database
      try {
        const response = await fetch('/api/voice-settings');
        const data = await response.json();
        
        if (data.settings) {
          const settings = data.settings;
          document.getElementById('speechRate_admin').value = settings.voice_rate || 1.0;
          document.getElementById('speechPitch_admin').value = settings.voice_pitch || 1.0;
          document.getElementById('speechVolume_admin').value = settings.voice_volume || 1.0;
          document.getElementById('rateValue_admin').textContent = settings.voice_rate || 1.0;
          document.getElementById('pitchValue_admin').textContent = settings.voice_pitch || 1.0;
          document.getElementById('volumeValue_admin').textContent = settings.voice_volume || 1.0;
          
          // Wait for voices to load before setting the selected voice
          setTimeout(() => {
            if (settings.voice_name) {
              document.getElementById('browserVoice_admin').value = settings.voice_name;
            }
          }, 500);
          
          console.log('‚úÖ Voice settings loaded from database');
        }
      } catch (error) {
        console.error('Error loading voice settings:', error);
        // Fallback to default values
        document.getElementById('speechRate_admin').value = 1.0;
        document.getElementById('speechPitch_admin').value = 1.0;
        document.getElementById('speechVolume_admin').value = 1.0;
        document.getElementById('rateValue_admin').textContent = 1.0;
        document.getElementById('pitchValue_admin').textContent = 1.0;
        document.getElementById('volumeValue_admin').textContent = 1.0;
      }
      
      // Event listeners
      document.getElementById('voiceProvider_admin').addEventListener('change', (e) => {
        showProviderSettings_admin(e.target.value);
      });
      
      document.getElementById('speechRate_admin').addEventListener('input', (e) => {
        document.getElementById('rateValue_admin').textContent = e.target.value;
      });
      
      document.getElementById('speechPitch_admin').addEventListener('input', (e) => {
        document.getElementById('pitchValue_admin').textContent = e.target.value;
      });
      
      document.getElementById('speechVolume_admin').addEventListener('input', (e) => {
        document.getElementById('volumeValue_admin').textContent = e.target.value;
      });
      
      document.getElementById('stability_admin').addEventListener('input', (e) => {
        document.getElementById('stabilityValue_admin').textContent = e.target.value;
      });
      
      document.getElementById('similarity_admin').addEventListener('input', (e) => {
        document.getElementById('similarityValue_admin').textContent = e.target.value;
      });
      
      document.getElementById('saveSettings_admin').addEventListener('click', saveSettings_admin);
      document.getElementById('resetSettings_admin').addEventListener('click', resetSettings_admin);
      document.getElementById('testBrowserVoiceBtn_admin').addEventListener('click', testBrowserVoice_admin);
      document.getElementById('testVoiceBtn_admin').addEventListener('click', testElevenLabsVoice_admin);
      
      console.log('‚úÖ Voice settings initialized');
    }
    
    function showProviderSettings_admin(provider) {
      const browserSettings = document.getElementById('browserSettings_admin');
      const elevenlabsSettings = document.getElementById('elevenlabsSettings_admin');
      
      browserSettings.classList.add('hidden');
      elevenlabsSettings.classList.add('hidden');
      
      if (provider === 'elevenlabs') {
        elevenlabsSettings.classList.remove('hidden');
      } else {
        browserSettings.classList.remove('hidden');
        loadBrowserVoices_admin();
      }
      
      localStorage.setItem('voiceProvider', provider);
    }
    
    function loadBrowserVoices_admin() {
      const select = document.getElementById('browserVoice_admin');
      const voices = speechSynthesis.getVoices();
      
      if (voices.length === 0) {
        setTimeout(loadBrowserVoices_admin, 100);
        return;
      }
      
      select.innerHTML = voices.map(voice => 
        `<option value="${voice.name}">${voice.name} (${voice.lang})</option>`
      ).join('');
      
      const savedVoice = localStorage.getItem('browserVoiceName');
      if (savedVoice) {
        select.value = savedVoice;
      }
    }
    
    function testBrowserVoice_admin() {
      const text = 'Welcome to SKSU SBO ISULAN FAQ system.';
      const utterance = new SpeechSynthesisUtterance(text);
      
      const voiceName = document.getElementById('browserVoice_admin').value;
      const voices = speechSynthesis.getVoices();
      const selectedVoice = voices.find(v => v.name === voiceName);
      
      if (selectedVoice) utterance.voice = selectedVoice;
      utterance.rate = parseFloat(document.getElementById('speechRate_admin').value);
      utterance.pitch = parseFloat(document.getElementById('speechPitch_admin').value);
      utterance.volume = parseFloat(document.getElementById('speechVolume_admin').value);
      
      speechSynthesis.speak(utterance);
      showToast('üîä Playing voice sample...');
    }
    
    async function testElevenLabsVoice_admin() {
      const apiKey = document.getElementById('elevenLabsApiKey_admin').value;
      const voiceId = document.getElementById('elevenLabsVoiceId_admin').value;
      
      if (!apiKey || !voiceId) {
        showToast('‚ö†Ô∏è Please enter API Key and Voice ID first', 'error');
        return;
      }
      
      const btn = document.getElementById('testVoiceBtn_admin');
      btn.disabled = true;
      btn.textContent = 'üîÑ Generating...';
      
      try {
        const stability = parseFloat(document.getElementById('stability_admin').value);
        const similarity = parseFloat(document.getElementById('similarity_admin').value);
        
        const response = await fetch('https://api.elevenlabs.io/v1/text-to-speech/' + voiceId, {
          method: 'POST',
          headers: {
            'Accept': 'audio/mpeg',
            'xi-api-key': apiKey,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            text: 'Welcome to SKSU SBO ISULAN FAQ system.',
            model_id: 'eleven_monolingual_v1',
            voice_settings: {
              stability: stability,
              similarity_boost: similarity
            }
          })
        });
        
        if (!response.ok) {
          throw new Error('ElevenLabs API error: ' + response.statusText);
        }
        
        const audioBlob = await response.blob();
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = new Audio(audioUrl);
        
        audio.play();
        showToast('‚úÖ Voice test successful!');
      } catch (error) {
        console.error('ElevenLabs error:', error);
        showToast('‚ùå Error: ' + error.message, 'error');
      } finally {
        btn.disabled = false;
        btn.textContent = 'üéß Test Your Voice';
      }
    }
    
    async function saveSettings_admin() {
      const provider = document.getElementById('voiceProvider_admin').value;
      localStorage.setItem('voiceProvider', provider);
      
      if (provider === 'elevenlabs') {
        const apiKey = document.getElementById('elevenLabsApiKey_admin').value;
        const voiceId = document.getElementById('elevenLabsVoiceId_admin').value;
        const stability = document.getElementById('stability_admin').value;
        const similarity = document.getElementById('similarity_admin').value;
        
        localStorage.setItem('elevenLabsApiKey', apiKey);
        localStorage.setItem('elevenLabsVoiceId', voiceId);
        localStorage.setItem('elevenLabsStability', stability);
        localStorage.setItem('elevenLabsSimilarity', similarity);
        
        showToast('‚úÖ ElevenLabs voice settings saved successfully!');
      } else {
        const voiceName = document.getElementById('browserVoice_admin').value;
        const rate = document.getElementById('speechRate_admin').value;
        const pitch = document.getElementById('speechPitch_admin').value;
        const volume = document.getElementById('speechVolume_admin').value;
        
        // Get voice language from selected voice
        const voices = speechSynthesis.getVoices();
        const selectedVoice = voices.find(v => v.name === voiceName);
        const voiceLang = selectedVoice ? selectedVoice.lang : 'en-US';
        
        // Save to database via API
        try {
          const response = await fetch('/api/admin/voice-settings', {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              voiceName: voiceName,
              voiceLang: voiceLang,
              voiceRate: parseFloat(rate),
              voicePitch: parseFloat(pitch),
              voiceVolume: parseFloat(volume)
            })
          });
          
          const data = await response.json();
          
          if (data.success) {
            showToast('‚úÖ Voice settings saved to database successfully!');
            
            // Also save to localStorage for backward compatibility
            localStorage.setItem('browserVoiceName', voiceName);
            localStorage.setItem('speechRate', rate);
            localStorage.setItem('speechPitch', pitch);
            
            setTimeout(() => {
              showToast('üí° Voice settings will apply immediately for all users!');
            }, 2000);
          } else {
            throw new Error('Failed to save voice settings');
          }
        } catch (error) {
          console.error('Error saving voice settings:', error);
          showToast('‚ùå Error: Failed to save voice settings to database', 'error');
        }
      }
    }
    
    function resetSettings_admin() {
      if (confirm('Reset all voice settings to default?')) {
        localStorage.removeItem('voiceProvider');
        localStorage.removeItem('elevenLabsApiKey');
        localStorage.removeItem('elevenLabsVoiceId');
        localStorage.removeItem('elevenLabsStability');
        localStorage.removeItem('elevenLabsSimilarity');
        localStorage.removeItem('browserVoiceName');
        localStorage.removeItem('speechRate');
        localStorage.removeItem('speechPitch');
        localStorage.removeItem('voiceSettings');
        showToast('‚úÖ Settings reset! Reloading...');
        setTimeout(() => location.reload(), 1000);
      }
    }
  </script>

  <!-- Add/Edit FAQ Modal - Positioned at end of body for maximum z-index -->
  <div id="faq-modal" class="modal fixed inset-0 items-center justify-center p-4" style="z-index: 9999; background: rgba(0, 0, 0, 0.75);">
    <div class="relative bg-white rounded-3xl p-8 md:p-12 max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl" 
         style="background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%); border: 1px solid rgba(139, 92, 246, 0.1);">
      
      <!-- Decorative gradient orbs -->
      <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl -z-10"></div>
      <div class="absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-blue-400/20 to-cyan-400/20 rounded-full blur-3xl -z-10"></div>
      
      <!-- Modal Header -->
      <div class="flex justify-between items-start mb-8 md:mb-10">
        <div>
          <h2 id="modal-title" class="text-3xl md:text-4xl font-bold mb-2" 
              style="background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #f59e0b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            ‚ú® Add New FAQ
          </h2>
          <p class="text-gray-500 text-sm">Create helpful answers for your students</p>
        </div>
        <button onclick="closeModal()" 
                class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gradient-to-br hover:from-red-400 hover:to-pink-500 text-gray-600 hover:text-white transition-all duration-300 hover:rotate-90 text-2xl font-light shadow-md hover:shadow-lg">
          √ó
        </button>
      </div>
      
      <form id="faq-form" class="space-y-6">
        <input type="hidden" id="faq-id">
        
        <!-- Category Field -->
        <div class="group">
          <label class="block mb-3 font-bold text-gray-700 text-sm uppercase tracking-wider flex items-center gap-2">
            <span class="text-2xl">üìÇ</span>
            <span>Category</span>
          </label>
          <div class="relative">
            <input type="text" id="category" required placeholder="e.g., Events, Contact, Services" 
                   class="premium-input w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:outline-none text-base font-medium shadow-sm">
            <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-purple-400/0 via-pink-400/0 to-purple-400/0 group-focus-within:from-purple-400/5 group-focus-within:via-pink-400/5 group-focus-within:to-purple-400/5 pointer-events-none transition-all duration-500"></div>
          </div>
        </div>
        
        <!-- Question Field -->
        <div class="group">
          <label class="block mb-3 font-bold text-gray-700 text-sm uppercase tracking-wider flex items-center gap-2">
            <span class="text-2xl">‚ùì</span>
            <span>Question</span>
          </label>
          <div class="relative">
            <input type="text" id="question" required placeholder="What do students ask?" 
                   class="premium-input w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:outline-none text-base font-medium shadow-sm">
            <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-purple-400/0 via-pink-400/0 to-purple-400/0 group-focus-within:from-purple-400/5 group-focus-within:via-pink-400/5 group-focus-within:to-purple-400/5 pointer-events-none transition-all duration-500"></div>
          </div>
        </div>
        
        <!-- Answer Field -->
        <div class="group">
          <div class="flex items-center justify-between mb-3">
            <label class="font-bold text-gray-700 text-sm uppercase tracking-wider flex items-center gap-2">
              <span class="text-2xl">üí¨</span>
              <span>Answer</span>
            </label>
            <button type="button" onclick="generateAIAnswer()" 
                    class="ai-button text-xs px-4 py-2.5 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 text-white rounded-full font-bold shadow-lg transition-all flex items-center gap-2 hover:scale-105">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 00-1-1h-.5a1.5 1.5 0 010-3H4a1 1 0 001-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z"/>
              </svg>
              <span>AI Generate</span>
            </button>
          </div>
          <div class="relative">
            <textarea id="answer" rows="6" required 
                      placeholder="Provide a clear, helpful answer..."
                      class="premium-textarea w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:outline-none text-base leading-relaxed resize-y shadow-sm font-medium"></textarea>
            <div class="absolute inset-0 rounded-xl bg-gradient-to-br from-purple-400/0 via-pink-400/0 to-orange-400/0 group-focus-within:from-purple-400/5 group-focus-within:via-pink-400/5 group-focus-within:to-orange-400/5 pointer-events-none transition-all duration-500"></div>
          </div>
        </div>
        
        <!-- Keywords Field -->
        <div class="group">
          <div class="flex items-center justify-between mb-3">
            <label class="font-bold text-gray-700 text-sm uppercase tracking-wider flex items-center gap-2">
              <span class="text-2xl">üè∑Ô∏è</span>
              <span>Keywords</span>
            </label>
            <button type="button" onclick="generateAIKeywords()" 
                    class="ai-button text-xs px-4 py-2.5 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 text-white rounded-full font-bold shadow-lg transition-all flex items-center gap-2 hover:scale-105">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 00-1-1h-.5a1.5 1.5 0 010-3H4a1 1 0 001-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z"/>
              </svg>
              <span>AI Generate</span>
            </button>
          </div>
          <div class="relative">
            <input type="text" id="keywords" 
                   placeholder="contact, email, reach, location"
                   class="premium-input w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:outline-none text-base shadow-sm font-medium">
            <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-purple-400/0 via-pink-400/0 to-purple-400/0 group-focus-within:from-purple-400/5 group-focus-within:via-pink-400/5 group-focus-within:to-purple-400/5 pointer-events-none transition-all duration-500"></div>
          </div>
          <small class="text-gray-500 text-sm mt-2 block flex items-center gap-2">
            <svg class="w-4 h-4 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
            <span>These help match user questions more accurately</span>
          </small>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex gap-4 mt-10 pt-6 border-t border-gray-200">
          <button type="submit" 
                  class="save-button flex-1 text-white px-8 py-4 rounded-xl font-bold transition-all text-base shadow-xl hover:shadow-2xl flex items-center justify-center gap-3">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"/>
            </svg>
            <span>Save FAQ</span>
          </button>
          <button type="button" onclick="closeModal()" 
                  class="flex-1 bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 px-8 py-4 rounded-xl font-bold hover:from-gray-200 hover:to-gray-300 transition-all text-base shadow-md hover:shadow-lg active:scale-95 flex items-center justify-center gap-3">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
            <span>Cancel</span>
          </button>
        </div>
      </form>
    </div>
  </div>

</body>
</html>
